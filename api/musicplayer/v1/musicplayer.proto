syntax = "proto3";

package musicplayer.v1;
option go_package = "./musicplayerpb";

service MusicplayerService {
	rpc UploadAlbum(UploadAlbumRequest) returns (UploadAlbumResponse);	
	rpc UploadMusic(UploadMusicRequest) returns (UploadMusicResponse);

	rpc GetAlbumList(GetAlbumListRequest) returns (GetAlbumListResponse);
	rpc GetAlbum(GetAlbumRequest) returns (GetAlbumResponse);
}

message UploadAlbumRequest {
	string name = 1;
	string description = 2;
	string image = 3;
}

message UploadAlbumResponse {
	int32 result = 1;
}

message UploadMusicRequest {
	uint32 album_id = 1;
	string name = 2;
	uint32 duration = 3;
	string ipfs = 4;
}

message UploadMusicResponse {
	int32 result = 1;
}

message GetAlbumListRequest {	
}
message AlbumShortInfo {
	uint32 id = 1;
	string name = 2;
	string description = 3;
	string image = 4;
}
message GetAlbumListResponse {
	repeated AlbumShortInfo albums = 1;
}

message GetAlbumRequest {
	uint32 id = 1;
}

message MusicFileInfo {
	uint32 album_id = 1;
	uint32 file_id = 2;
	string name = 3;
	uint32 duration = 4;
	string ipfs = 5;
}

message AlbumInfo {
	uint32 id = 1;
	string name = 2;
	string description = 3;
	string image = 4;
	repeated MusicFileInfo musics = 5;
}
message GetAlbumResponse {
	AlbumInfo album = 1;
}